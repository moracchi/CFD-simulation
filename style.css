/* コメントは省略し、前回回答と同じ。 必要ならご要望に合わせて追記・修正可能です。 */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f7fa;
    color: #333;
}
.container { max-width: 1200px; margin: 0 auto; padding: 20px; }
.header { text-align: center; margin-bottom: 30px; padding: 20px; background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); color: #fff; border-radius: 10px;}
.header h1 {font-size: 2.2rem;margin-bottom: 10px;}
.header p {font-size: 1.1rem; opacity: 0.9;}

.settings-panel, .results-panel {
    background: #fff;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 30px;
}
.settings-panel h2, .results-panel h2 {
    color: #2c3e50; margin-bottom: 25px; font-size: 1.5rem; border-bottom: 2px solid #3498db; padding-bottom: 10px;
}
.basic-settings {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
    gap: 20px;
    margin-bottom: 30px;
}
.input-group { display: flex; flex-direction: column;}
.input-group label { font-weight: 600; margin-bottom: 8px; color: #2c3e50;}
.input-group input, .input-group select {
    padding: 12px; border:2px solid #ddd; border-radius: 6px; font-size: 16px; transition: border-color 0.3s;
}
.input-group input:focus, .input-group select:focus { border-color: #3498db;}
.unit { font-size: 14px; color: #7f8c8d; margin-top: 5px;}

.position-rules h3 { color: #2c3e50; margin-bottom: 15px; font-size: 1.3rem; }
.rules-header, .rule-row {
    display: grid; grid-template-columns: 1fr 1fr 1fr 100px; gap: 15px; align-items: center;
}
.rules-header { padding: 10px 0;font-weight: 600;color: #2c3e50;border-bottom: 2px solid #ecf0f1;margin-bottom: 15px;}
.rule-row { padding: 10px 0; border-bottom: 1px solid #ecf0f1;}
.rule-row input { padding: 8px; border: 1px solid #ddd; border-radius: 4px;}
.delete-rule-btn { background: #e74c3c; color: #fff; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;font-size: 14px;}
.delete-rule-btn:hover { background: #c0392b;}
.add-rule-btn {
    background: #27ae60; color: #fff; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 16px; margin-top: 15px;
}
.simulate-btn {
    background: linear-gradient(135deg,#3498db,#2c3e50); color: #fff; border: none; padding: 15px 40px; border-radius: 8px; cursor: pointer;
    font-size: 18px; font-weight: 600; margin-top: 20px; transition:transform 0.2s; width: 100%;
}
.simulate-btn:hover { transform: translateY(-2px); }

.summary { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #27ae60;}
.summary-item { display: inline-block; margin: 0 20px 10px 0; font-size: 16px;}
.summary-label { font-weight: 600; color: #2c3e50;}
.summary-value { color: #27ae60; font-weight: 700;}
.summary-value.negative { color: #e74c3c; }

.tabs { display: flex; margin-bottom: 20px; border-bottom: 2px solid #ecf0f1;}
.tab-btn {
    background: none; border: none; padding: 12px 24px; cursor: pointer; font-size: 16px; color: #7f8c8d; border-bottom: 2px solid transparent;
}
.tab-btn.active { color: #3498db; border-bottom-color: #3498db;}
.tab-content {display: none;}
.tab-content.active {display: block;}

.table-container{ overflow-x: auto; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);}
#resultsTable{ width:100%; border-collapse: collapse; background:#fff;}
#resultsTable th{background:#34495e;color:#fff;padding:15px;text-align:left;}
#resultsTable td{padding:12px 15px; border-bottom:1px solid #ecf0f1;}
#resultsTable tbody tr:hover{background:#f8f9fa;}
.profit-positive{ color: #27ae60; font-weight: 600;}
.profit-negative{ color: #e74c3c; font-weight: 600;}
.chart-container{ margin-bottom: 30px; padding:20px; background:#f8f9fa; border-radius:8px;}

.error-message{ background: #e74c3c; color: #fff; padding: 15px; border-radius: 6px; margin-top: 20px; font-weight: 600;}
@media (max-width: 768px) {
    .container {padding: 10px;}
    .header h1 {font-size: 1.8rem;}
    .basic-settings {grid-template-columns: 1fr;}
    .rules-header, .rule-row {grid-template-columns: 1fr; gap: 10px;}
    .rules-header span {display: none;}
    .rule-row input {margin-bottom: 5px;}
    .tabs {flex-direction: column;}
    .tab-btn {text-align: left; border-bottom: 1px solid #ecf0f1;}
    .summary-item {display: block; margin: 10px 0;}
}
@keyframes fadeIn {from{opacity: 0; transform: translateY(20px);}to{opacity: 1; transform: translateY(0);}}
.results-panel {animation: fadeIn 0.5s;}
